<!DOCTYPE html>
<html>
<head>
  <title>Scrollstory: Basic usage</title>
  <meta charset="UTF-8">
  <style>
   html, body { padding: 0; margin: 0; height:100%; }
    .container  {
        height:100%; /* if using percentage here, you need height:100% on html tag too */
        margin: 0 auto 0 auto;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
        position: relative;
    }
    .sticky-image  {
        position: sticky;
        width: 100%;
        height: 280px;
        top: calc(50% - 140px); /* where to start "sticking" from - here we use middle of page */
        top: 0; /* where to start "sticking" from - here we use top of page */
        text-align: center;
        background: rgba(100, 100, 100, 0.5);
        /* z-index: -1; */
        /* Safari workarounds: */
        display: block;
        position: -webkit-sticky;
    }
    .sticky-image h2 {
      margin-top: 0;
      padding-top: 14px;

    }
    .scene {
      transition: 350ms linear;
      padding: 12px;
      margin: 0;
    }
    .is-active {
      background-color: lightgreen;
    }
  </style>
</head>
<body>
  <div class="container">
  <div>
    <div class="sticky-container">
      <h1>Animal Farm</h1>
      <p class="scene scene1">
      Mr. Jones, of the Manor Farm, had locked the hen-houses for the night, but was too drunk to remember to shut the
      pop-holes. With the ring of light from his lantern dancing from side to side, he lurched across the yard, kicked off
      his boots at the back door, drew himself a last glass of beer from the barrel in the scullery, and made his way upht from his lantern dancing from side to side, he lurched across the yard, kicked off
      his boots at the back door, drew himself a last glass of beer from the barrel in the scullery, and made his way up
      to bed, where Mrs. Jones was already snoring.
      </p>
      <p  class="scene scene2">
      As soon as the light in the bedroom went out there was a stirring and a fluttering all through the farm buildings.
      Word had gone round during the day that old Major, the prize Middle White boar, had had a strange dream on the
      previous night and wished to communicate it to the other animals. It had been agreed that they should all meet in
      the big barn as soon as Mr. Jones was safely out of theto communicate it to the other animals. It had been agreed that they should all meet in
      the big barn as soon as Mr. Jones was safely out of the way. Old Major (so he was always called, though the name
      under which he had been exhibited was Willingdon Beauty) was so highly regarded on the farm that everyone was quite
      ready to lose an hour's sleep in order to hear what he had to say.
      </p>
      <p  class="scene scene3">
      At one end of the big barn, on a sort of raised platform, Major was already ensconced on his bed of straw, under a
      lantern which hung from a beam. He was twelve years old and had lately grown rather stout, but he was still a
      majestic-looking pig, with a wise and benevolent appearance in spite of the fact that his tushes had never been cut.
      Before long the other animals began to arrive and make themselves comfortable after their different fashions. First
      came the three dogs, Bluebell, Jessie, and Pincher, and then the pigs, who settled down in the straw immediately in
      front of the platform. The hens perched themselves on the window-sills, the pigeons fluttered up to the rafters, the
      sheep and cows lay down behind the pigs and began to ch and had lately grown rather stout, but he was still a
      majestic-looking pig, luttered up to the rafters, the chew the cud. The two cart-horses, Boxer and Clover, came in
      together, walking very slowly and setting down their vast hairy hoofs with great care lest there should be some
      small animal concealed in the straw. Clover was a stout motherly mare approaching middle life, who had never quite
      got her figure back after her fourth foal. Boxer was an enormous beast, nearly eighteen hands high, and as strong as
      any two ordinary horses put together. [...]
      </p>
      <div class="sticky-image">
        <h2>SCENE 4: Heading</h2>
        <img src="https://picsum.photos/400/200">
      </div>
      <p  class="scene scene4">
      The two horses had just lain down when a brood of ducklings, which had lost their mother, filed into the barn,
      cheeping feebly and wandering from side to side to find some place where they would not be trodden on. Clover made a
      sort of wall round them with her great foreleg, and the ducklings nestled down inside it and promptly fell asleep.
      At the last moment Mollie, the foolish, pretty white mare who drew Mr. Jones's trap, came mincing daintily in,
      chewing at a lump of sugar. She took a place near the front and began flirting her white mane, hoping to draw
      attention to the red ribbons it was plaited with. Last of all came the cat, who looked round, as usual, for the
      warmest place, and finally squeezed herself in between Boxer and Clover; there she purred contentedly throughout
      Major's speech without listening to a word of what he was saying.
      </p>
      <p  class="scene scene5">
      All the animals were now present except Moses, the tame raven, who slept on a perch behind the back door. When Major
      saw that they had all made themselves comfortable and were waiting attentively, he cleared his throat and began:
      All the animals were now present except Moses, the tame raven, who slept on a perch behind the back door. When Minor
      saw that they had all made themselves comfortable and were waiting attentively, he cleared his throat and began!
      All the animals were now present except Moses, the tame raven, who slept on a perch behind the back door. When Major
      saw that they had all made themselves comfortable and were waiting attentively, he cleared his throat and began:
      All the animals were now present except Moses, the tame raven, who slept on a perch behind the back door. When Minor
      saw that they had all made themselves comfortable and were waiting attentively, he cleared his throat and began!
      </p>
      <p  class="scene scene6">
      Comrades, you have heard already about the strange dream that I had last night. But I will come to the dream later.
      I have something else to say first. I do not think, comrades, that I shall be with you for many months longer, and
      before I die, I feel it my duty to pass on to you such wisdom as I have acquired. I have had a long life, I have had
      Comrades, you have heard already about the strange dream that I had last night. But I will come to the dream later.
      I have something else to say first. I do not think, comrades, that I shall be with you for many months longer, and
      before I die, I feel it my duty to pass on to you such wisdom as I have acquired. I have had a long life, I have had
      much time for thought as I lay alone in my stall, and I think I may say that I understand the nature of life on this
      earth as well as any animal now living. It is about this that I wish to speak to you.
      </p>
      <p  class="scene scene7">
      Now, comrades, what is the nature of this life of ours? Let us face it: our lives are miserable, laborious, and
      short. We are born, we are given just so much food as will keep the breath in our bodies, and those of us who are
      capable of it are forced to work to the last atom of our strength; and the very instant that our usefulness has come
      to an end we are slaughtered with hideous cruelty. No animal in England knows the meaning of happiness or leisure
      after he is a year old. No animal in England is free. The life of an animal is misery and slavery: that is the plain
      truth.
      </p>
    </div>
      <p  class="scene scene8">
      But is this simply part of the order of nature? Is it because this land of ours is so poor that it cannot afford a
      decent life to those who dwell upon it? No, comrades, a thousand times no! The soil of England is fertile, its
      climate is good, it is capable of affording food in abundance to an enormously greater number of animals than now
      inhabit it. This single farm of ours would support a dozen horses, twenty cows, hundreds of sheep--and all of them
      living in a comfort and a dignity that are now almost beyond our imagining. Why then do we continue in this
      miserable condition? Because nearly the whole of the produce of our labour is stolen from us by human beings. There,
      comrades, is the answer to all our problems. It is summed up in a single word--Man. Man is the only real enemy we
      have. Remove Man from the scene, and the root cause of hunger and overwork is abolished for ever.
      </p>
  </div>
  <script src="../dist/scrollstory.min.js"></script>
  <script>

      var story = new ScrollStory({
          container: document.querySelector(".container"),
          scenes: document.querySelectorAll(".scene"),
          // define what happens on "enter", "progress" and "exit" of scenes
          enter: enter,
          exit: exit,
          progress: progress,
      });

      console.log('story: initial settings', story);

      //
      // ...our callbacks are defined below:
      //

      const h2 = document.querySelector('.sticky-image h2')

      // define functions for each scene

      const onEnter = {
        "scene5": () => h2.innerText = "Updated by SCENE 5",
        "scene6": () => h2.innerText = "Updated by SCENE 6",
        "scene7": () => h2.innerText = "Updated by SCENE 7",
      }

      const onExit = {
        "scene5": d => d.direction === "up" ? h2.innerText = "SCENE 4: Heading" : false,
      }

      const onProgress = {
        "scene3": d => console.log(d.progress),
      }


      // these are our callbacks: wrapper functions set current
      // scene as active, then run its function (above):

      function enter(d) {
        d.element.classList.add('is-active');
        const scene = d.element.className.split(" ")[1]
        return onEnter[scene] ? onEnter[scene](d) : false
      }

      function exit(d) {
        d.element.classList.remove('is-active');
        const scene = d.element.className.split(" ")[1]
        return onExit[scene] ? onExit[scene](d) : false
      }

      function progress(d) {
        const scene = d.element.className.split(" ")[1]
        return onProgress[scene] ? onProgress[scene](d) : false
      }


  </script>
</body>
</html>
